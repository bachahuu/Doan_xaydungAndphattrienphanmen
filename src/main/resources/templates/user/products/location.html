<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
    <div th:fragment="content">
        <!-- Title Section -->
        <section class="shipping-page">
            <div class="title">
                <div>
                    <h2>Thông tin giao hàng</h2>
                </div>
            </div>

            <div class="form-container">
                <!-- Form -->
                <form th:action="@{/shipping/submit}"id="shippingForm" method="post">
                    <input type="hidden" id="cartTotalPriceInput" name="cartTotalPrice" th:value="${cartTotalPrice}" />
                    <input type="hidden" id="discountIdInput" name="discountId" value="" />
                    <input type="hidden" id="finalTotalInput" name="finalTotal" value="" />
                    <!-- măc định phí ship 30k -->
                    <input type="hidden" id="shippingFeeInput" name="shippingFee" value="30000" />   
                    
                    
                    <!-- Left Section - Customer Information -->
                    <div class="customer-info-section">
                        <table class="add_KH">
                            <tr>
                                <td colspan="3"><label for="name">Họ và Tên</label></td>
                            </tr>
                            <tr>
                                <td colspan="3">
                                    <input class="ten" type="text" id="name" name="txtname" />
                                </td>
                            </tr>
                            <tr>
                                <td colspan="3">
                                    <div class="info_row">
                                        <!-- <div>
                                            <label for="email">Email</label>
                                            <input class="email" type="email" id="email" name="txtemail" />
                                        </div> -->
                                        <div>
                                            <label for="phone">Số điện thoại</label>
                                            <input class="phone" type="text" id="phone" name="txtphone" />
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr id="info_an" style="display: table-row">
                                <td colspan="3"><label for="address">Địa chỉ</label></td>
                            </tr>
                            <tr id="info_an1" style="display: table-row">
                                <td colspan="3">
                                    <input class="address" type="text" id="address" name="txtaddress" />
                                </td>
                            </tr>
                            <!-- <tr id="info_an2" style="display: table-row">
                                <td colspan="3">
                                    <div class="address-selects">
                                        <select id="city" name="city">
                                            <option value="">Chọn tỉnh / thành</option>
                                        </select>
                                        <select id="district" name="district">
                                            <option value="">Chọn quận / huyện</option>
                                        </select>
                                        <select id="ward" name="ward">
                                            <option value="">Chọn phường / xã</option>
                                        </select>
                                    </div>
                                </td>
                            </tr> -->
                            <tr>
                                <td colspan="3">
                                    <div class="checkbox-container">
                                        <input type="checkbox" id="ckbstore" name="ckbstore" />
                                        <label for="ckbstore">Nhận tại cửa hàng</label>
                                    </div>
                                </td>
                            </tr>
                            <tr id="storeInfomation" style="display: none">
                                <td colspan="3">
                                    <div style="text-align: center;">
                                        <p>Địa chỉ: Số 15 Nguyễn Khuyến, Văn Quán, Hà Đông, Hà Nội</p>
                                        <p>Số điện thoại: 089.663.1696 / 0586.928.928</p>
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <!-- Right Section - Payment Summary -->
                    <div class="payment-summary-section">
                        <table class="ship">
                            <tr>
                                <td colspan="2">
                                    <div class="voucher-section">
                                        <select id="voucher" name="voucher">
                                            <option value="">Mã free Ship/Mã giảm giá</option>
                                            <option th:each="km : ${discounts}" 
                                            th:if="${km.trangThai == 1}"
                                                    th:value="${km.id}" 
                                                    th:text="${km.tenKM}"
                                                    th:attr="data-value=${km.giaTri}, data-condition-value=${km.giaTriDonHangToiThieu}">
                                            </option>
                                        </select>
                                        <div class="button_apdung">
                                            <button type="button" name="btnapdung_KM" id="apply-voucher-btn">Áp dụng</button>
                                        </div>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="price-row">
                                        <span>Giảm</span>
                                        <span class="price-value"><span id="giamgia-value">0</span><sup>đ</sup></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="price-row">
                                        <span>Tạm tính</span>
                                        <span class="price-value"><span id="tamtinh-value" th:text="${#numbers.formatInteger(cartTotalPrice , 0 , 'COMMA')}">0</span><sup>đ</sup></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="price-row">
                                        <span>Phí vận chuyển</span>
                                        <span class="price-value"><span id="shipping-fee-value">30,000</span><sup>đ</sup></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="price-row total">
                                        <span>Tổng tiền</span>
                                        <span class="price-value"><span id="total-value">0</span><sup>đ</sup></span>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="2">
                                    <div class="buttun_thanhtoan">
                                        <input type="submit" name="btnthanhtoan" value="Hoàn tất thông tin" />
                                    </div>
                                </td>
                            </tr>
                        </table>
                    </div>
                </form>
            </div>
        </section>

        <!-- Link CSS và JavaScript -->
        <!-- <script th:src="@{/js/user/shipping.js}"></script> -->
        <script th:src="@{/js/user/location.js}"></script>
    </div>
</body>
</html>