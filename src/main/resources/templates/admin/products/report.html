<!-- templates/admin/products/report.html -->
<div th:fragment="content" class="container mt-4">

  <!-- ๐ PHแบฆN 1๏ธโฃ: Quแบฃn lรฝ Bรกo cรกo -->
  <div class="card shadow-lg border-0 rounded-4 mb-5">
    <div class="card-header bg-gradient bg-primary text-white text-center fs-4 fw-bold">
      ๐งพ Quแบฃn lรฝ Bรกo cรกo
    </div>

    <div class="card-body">
      <input type="hidden" id="reportId">

      <!-- Dรฒng chแปn loแบกi, ngฦฐแปi lแบญp, ghi chรบ -->
      <div class="row g-2 align-items-center mb-3">
        <div class="col-md-3">
          <select id="reportType" class="form-select">
            <option value="Doanh thu thรกng">Doanh thu thรกng</option>
            <option value="Tแปn kho">Tแปn kho</option>
            <option value="Sแบฃn phแบฉm bรกn chแบกy">Sแบฃn phแบฉm bรกn chแบกy</option>
          </select>
        </div>
        <div class="col-md-3">
          <input type="text" id="reportCreator" class="form-control" placeholder="Ngฦฐแปi lแบญp bรกo cรกo">
        </div>
        <div class="col-md-4">
          <input type="text" id="reportNote" class="form-control" placeholder="Ghi chรบ (nแบฟu cรณ)">
        </div>
        <div class="col-md-2 d-flex gap-2">
          <button id="createBtn" class="btn btn-primary flex-fill" onclick="createReport()">โ Tแบกo</button>
          <button id="updateBtn" class="btn btn-success flex-fill d-none" onclick="updateReport()">๐พ Lฦฐu</button>
          <button id="cancelBtn" class="btn btn-secondary flex-fill d-none" onclick="cancelEdit()">โ Huแปท</button>
        </div>
      </div>

      <!-- Dรฒng nhแบญp doanh thu / ฤฦกn hรng / tแปn kho -->
      <div class="row g-3 mb-4">
        <div class="col-md-4">
          <label class="form-label fw-semibold">๐ฐ Doanh thu</label>
          <input type="number" id="reportRevenue" class="form-control" placeholder="Nhแบญp tแปng doanh thu (VNฤ)">
        </div>
        <div class="col-md-4">
          <label class="form-label fw-semibold">๐ฆ Tแปng ฤฦกn hรng</label>
          <input type="number" id="reportOrders" class="form-control" placeholder="Nhแบญp sแป lฦฐแปฃng ฤฦกn hรng">
        </div>
        <div class="col-md-4">
          <label class="form-label fw-semibold">๐ Sแบฃn phแบฉm tแปn kho</label>
          <input type="number" id="reportStock" class="form-control" placeholder="Nhแบญp sแป sแบฃn phแบฉm tแปn">
        </div>
      </div>

      <!-- Nรบt thao tรกc -->
      <div class="mb-3 text-end">
        <button class="btn btn-outline-secondary me-2" onclick="loadReports()">๐ Xem bรกo cรกo</button>
        <button class="btn btn-outline-success" onclick="exportReportWord()">โฌ๏ธ Xuแบฅt Word</button>
      </div>

      <!-- Bแบฃng kแบฟt quแบฃ -->
      <div id="reportTable" class="mt-3">
        <div class="alert alert-info text-center">Chฦฐa cรณ bรกo cรกo nรo ฤฦฐแปฃc tแบกo</div>
      </div>
    </div>
  </div>

  <!-- ๐ PHแบฆN 2๏ธโฃ: Thแปng kรช -->
  <div class="card shadow-lg border-0 rounded-4">
    <div class="card-header bg-gradient bg-success text-white text-center fs-4 fw-bold">
      ๐ Thแปng kรช doanh thu & sแบฃn phแบฉm
    </div>

    <div class="card-body">

      <div class="mb-4">
        <label class="fw-semibold me-2"><i class="bi bi-funnel"></i> Chแปn chแบฟ ฤแป:</label>
        <select id="modeSelect" class="form-select d-inline-block w-auto" onchange="toggleInputs()">
          <option value="day">Theo ngรy</option>
          <option value="month">Theo thรกng</option>
          <option value="year">Theo nฤm</option>
        </select>
      </div>

      <div id="inputDay" class="mb-3">
        <label class="fw-semibold">
          <i class="bi bi-calendar3"></i> Ngรy:
          <input type="date" id="reportDate" class="form-control d-inline-block w-auto ms-2">
        </label>
      </div>

      <div id="inputMonthYear" class="mb-3 d-none">
        <label class="fw-semibold me-2">Thรกng:</label>
        <input type="number" id="reportMonth" class="form-control d-inline-block w-auto" min="1" max="12" value="1">
        <label class="fw-semibold ms-3 me-2">Nฤm:</label>
        <input type="number" id="reportYear" class="form-control d-inline-block w-auto" min="2000" value="2025">
      </div>

      <div id="inputYear" class="mb-3 d-none">
        <label class="fw-semibold">
          <i class="bi bi-calendar"></i> Nฤm:
          <input type="number" id="onlyYear" class="form-control d-inline-block w-auto ms-2" min="2000" value="2025">
        </label>
      </div>

      <div class="mb-4 btn-group flex-wrap" role="group">
        <button class="btn btn-success" onclick="getRevenue()">๐ฐ Doanh thu</button>
        <button class="btn btn-info text-white" onclick="getOrderCount()">๐ฆ ฤฦกn hรng</button>
      </div>

      <div id="reportResult" class="mt-4">
        <div class="alert alert-secondary text-center" role="alert">
          Chฦฐa cรณ dแปฏ liแปu, vui lรฒng chแปn thao tรกc phรญa trรชn ๐
        </div>
      </div>
    </div>
  </div>

  <script src="/js/admin/report.js"></script>
</div>
